<html>
  <head>
    <title>Linked Allocation</title>

    <style>
      .s_hide {
        display: none;
      }

      .some {
        background-color:tomato;
        color:gray;
      }
 
      input {
        width: 10%;
        padding: 12px 20px;
        margin: 8px ;
        box-sizing: border-box;
        border: none;
        background-color:white;
        color: black;
      }

      .anchor, .anchor1 {
        background-color: black; /* Green */
        border: none;
        color: white;
        padding: 12px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 8px 0;
        -webkit-transition-duration: 0.4s; /* Safari */
        transition-duration: 0.4s;
        cursor: pointer;
      }

      .style1 {
        background-color:red;
        color:white;
      }

      .button1 {
        background-color:white; /* Green */
        border: none;
        color: black;
        padding: 12px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 8px 0;
        -webkit-transition-duration: 0.4s; /* Safari */
        transition-duration: 0.4s;
        cursor: pointer;
      }

      .button1:hover {
        background-color: black;
        color: white;
      }

      body {
	margin-left :40%;
	background-color: gray;
      }

      #heading {
	margin-left:-80%;
	text-align:center;
	color: powderblue ;
      }

      .a1{
        border: none;
        margin: 8px 0;
        border:solid 2px white;
        background-color: yellow;
        text-align: center;
        font-weight: bold;
        font-size: 16px;
	}
      </style>
  </head>

  <body onload="initialise()">
    <marquee class="some" id="heading" behavior="alternate" scrollamount=10 align="center">
      <h1>Linked Scheduling</h1>
    </marquee>

    <p>Enter the number of files:</p>
    <input id="nof" type="number">

    <button class="button1"  onclick="show_fields()">OK</button>
	
    <!-- =======================input fields =================================-->

    <form class="s_hide">
      <p> Your First File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(0)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(0)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Second File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(1)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(1)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Third File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(2)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(2)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Fourth File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(3)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(3)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Fifth File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(4)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(4)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Sixth File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(5)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(5)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Seventh File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(6)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(6)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <form class="s_hide">
      <p> Your Eighth File</p>

      <label>File index:</label>
      <input id="file_no" type="number">

      <label>Enter the number of the block:</label>
      <input type="number">

      <div class="anchor" onclick="inside_form(7)">
        <a>DONE</a> 
      </div> 

      <ul>
        <li class="s_hide">
          <label>Block 1:</label>
          <input  type="number">
        </li>

        <li class="s_hide">
          <label>Block 2:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 3:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 4:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 5:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 6:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 7:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 8:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 9:</label>
          <input  type="number">
        </li>
        <li class="s_hide">
          <label>Block 10:</label>
          <input  type="number">
        </li>
      </ul>

      <div class="anchor1" onclick="allocate(7)">
        <a class="s_hide">ALLOCATE</a> 
      </div>

      <div class="anchor1" onclick="del(0)">
        <a>DELETE</a> 
      </div>

      <p class="frag_place" style="background-color: black ;color:white"></p><br>
    </form>

    <p id="error_check"></p>

    <div class="s_hide" id="output_space">
      <p class="out"></p>
      <p class="out"></p>
      <p class="out"></p>
      <p class="out"></p>
      <p class="out"></p>
      <p class="out"></p>
      <p class="out"></p>
      <p class="out"></p>	
    </div>
    </body>

  <script>
    /* Display the input fields*/
    var form_no = -1,show_output=-1;
    var file_ind=[];

    function show_fields()
    {
      var no_of_files = document.getElementById("nof").value;

      for(var i=0;i<no_of_files;++i)	
        s_add_in();
    }

    function s_add_in()
    {
            form_no = form_no +1;
            var f = document.getElementsByTagName("form")[form_no];

            var att = document.createAttribute("class");
            att.value ="s_show";

            f.setAttributeNode(att);
    }

    /* Display the block numbers*/
    var block_number=[];

    window.onload = function()
    {
            initialise();
    };

    function initialise()
    {
      for(var i=0;i<8;++i)
        block_number.push(-1);

      for(var i=0;i<1000;++i)
        file_ind.push(-1);
    }

    function inside_form(form_numb)
    {
      //this is the base value
      var pos = 12*form_numb;	
      var ch = check(form_numb);
      if(ch == 0)
              return;

      var no_of_blocks = document.getElementsByTagName("input")[pos+2].value;

      var pos_li = form_numb *10;
      for(var i=0;i<no_of_blocks;++i)
      {
              var f = document.getElementsByTagName("li")[pos_li+i];
              var att = document.createAttribute("class");
              att.value ="s_show";
              f.setAttributeNode(att);
      }

      var y = 3*form_numb +1;
      var f = document.getElementsByTagName("a")[y];
      var att = document.createAttribute("class");
      att.value = "s_show";
      f.setAttributeNode(att);
    }

    function check(in_num)
    {
      var len = file_ind.length;
      var z = in_num *12 +1;
      var index = document.getElementsByTagName("input")[z].value;

      if(file_ind[index] == 1)
      {
              alert("The file index "+ index +"is already allocated");
              return 0;
      }	
      else
      {
              file_ind[index]  =1;
              return 1;
      }
    }

    /*===================================ALLOCATION==============================*/

    function allocate(in_form)
    {
      var str = [];
      var pos = 12* in_form;
      var values = in_form * 10;
      var no_of_blocks = document.getElementsByTagName("input")[pos+2].value;
            
      //for each and every entry check whether it is allocated or not
      for(var i=0;i<no_of_blocks;++i)
      {
        //this will give us the values+i th li element
        var x1 = document.getElementsByTagName("li")[values+i];

        // this will give us the 0th input element in the x1 li , we put 0 coz each li has only 1 input
        var x = x1.getElementsByTagName("input")[0].value;		

        if(file_ind[x] == 1)
        {
          alert("The file index "+ x +" is already allocated");
          return;
        }
        else{
          file_ind[x]=1;
        }
            
        if(i == no_of_blocks-1)
        {
          alert("All the files have been allocated");

          var f =document.getElementById("output_space");
          var att = document.createAttribute("class");
          att.value = "s_show";
          f.setAttributeNode(att);

          var index_value = document.getElementsByTagName("input")[pos+1].value;
          str = str + index_value ;

          for(var i=0;i<no_of_blocks;++i)
          {
            // im retriving the file number(block number) and put it in the chosen paragraphs
            var x1 = document.getElementsByTagName("li")[values+i];
            var x = x1.getElementsByTagName("input")[0].value;	
            if(i== no_of_blocks-1)
              str = str  + "---> " +  x;	
            else
               str = str  + "---> " +  x;		

            if(i == no_of_blocks-1)
            {
              var k = document.getElementsByClassName("out")[in_form];
              k.innerHTML = str;

              if(in_form == 0){
                      k.style.backgroundColor = "#3CBC8D";
                      k.style.color = "black";
              }
              if(in_form == 1){
                      k.style.backgroundColor = "black";
                      k.style.color = "white";
              }
              if(in_form == 2){
                      k.style.backgroundColor = "#3CBC8D";
                      k.style.color = "black";
              }
              if(in_form == 3){
                      k.style.backgroundColor = "black";
                      k.style.color = "white";
              }
              if(in_form == 4){
                      k.style.backgroundColor = "#3CBC8D";
                      k.style.color = "black";
              }
              if(in_form == 5){
                      k.style.backgroundColor = "black";
                      k.style.color = "white";
              }
              if(in_form == 6){
                      k.style.backgroundColor = "#3CBC8D";
                      k.style.color = "black";
              }
              if(in_form == 7){
                      k.style.backgroundColor = "black";
                      k.style.color = "white";
              }
            }
          }
        }
      }
    }

    function del(in_form)
    {
      var out_start=0;
      //find the starting index of the output
      for(var i=0;i<8;++i)
      {
        var pos = 12* in_form;
        var values = in_form * 10;
        var no_of_blocks = document.getElementsByTagName("input")[pos+2].value;

        var values = in_form * 10;

        if(i == in_form)
        {
          file_ind[in_form] = 0;
          var k =document.getElementsByClassName("out")[in_form];
          var index_value = document.getElementsByTagName("input")[pos+1].value;
          file_ind[index_value]=0;
          k.innerHTML = "";

          for(var j=0; j<no_of_blocks; ++j)
          {
                  //this will give us the values+i th li element
                  var x1 = document.getElementsByTagName("li")[values+j];	
                  var x = x1.getElementsByTagName("input")[0].value;

                  file_ind[x] = 0;
          }
        }
        out_start = out_start + no_of_blocks;
      }	
    }
  </script>
</html>
